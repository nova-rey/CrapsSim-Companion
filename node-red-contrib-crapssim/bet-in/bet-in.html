<script type="text/html" data-template-name="bet-in" data-label="Bet Variable">
  <div class="form-row">
    <label for="node-input-betId"><i class="fa fa-link"></i> Bet ID</label>
    <input type="text" id="node-input-betId" placeholder="place6">
  </div>
  <div class="form-tips">
    Provide a Bet ID to latch <code>msg.value</code> (integer) and <code>msg.unitType</code> (unit|dollars) for downstream bet nodes.
  </div>
</script>

<script type="text/html" data-help-name="bet-in">
  <h3>What this node does</h3>
  <p>Stores an incoming bet amount and unit type under a Bet ID so later bet nodes can pull the value when configured for feeds.</p>

  <h3>Inputs</h3>
  <ul>
    <li><b>Bet ID</b>: Label used as the lookup key.</li>
    <li><b>Message fields</b>: <code>msg.value</code> (integer amount) and <code>msg.unitType</code> (<code>unit</code> or <code>dollars</code>). Optional <code>msg.var</code> metadata is preserved.</li>
  </ul>

  <h3>Outputs</h3>
  <p>No output wires. The value is saved in flow context (<code>__betFeed</code>), and node status shows the latest amount and units for the Bet ID.</p>

  <h3>Errors</h3>
  <ul>
    <li>Missing Bet ID.</li>
    <li>Non-integer <code>msg.value</code> or unsupported <code>msg.unitType</code> values.</li>
  </ul>
</script>

<script type="text/javascript">
  RED.nodes.registerType("bet-in", {
    category: "craps-bets",
    color: "#4C8BF5",
    icon: "icons/utility-node.svg",
    defaults: {
      betId: { value: "", required: true }
    },
    inputs: 1,
    outputs: 0,
    paletteLabel: "Bet Variable",
    label: function() {
      return "Bet Variable";
    }
  });
</script>
